<font face="Courier New">
<font size="3">
<!-- <font face="宋体"> -->

[toc]

# 第四章 程序的控制结构
## 4.1 程序的基本结构
### 4.1.3 程序的基本结构实例
#### [微实例4.1]圆面积和周长的计算
#### [微实例4.2]实数绝对值的计算

<br>

## 4.2 程序的分支结构
### 4.2.2 二分支结构:if-else语句
#### 1. 简洁的表达方式,适合通过判断返回特定值:  
```python
<表达式1> if <条件> else <表达式2>
```
- 例子
```python
>>>count = 2
>>>count if count != 0 else "不存在"
2

>>>count = 0
>>>count if count != 0 else "不存在"
"不存在"
```
<br>

## 4.3 实例5:身体质量指数BMI
实例代码5.1CalBMI
- 代码:
```python
height, weight = eval(input("请输入身高(米)和体重(公斤)[逗号隔开]: "))
bmi = weight / pow(height, 2)
print("BMI数值为:{:.2f}".format(bmi))
if bmi < 18.5:
    who, dom = '偏瘦', '偏瘦'
elif 18.5 <= bmi < 24:
    who, dom = '正常', '正常'
elif 24 <= bmi < 25:
    who, dom = '正常', '偏胖'
elif 25 <= bmi < 28:
    who, dom = '偏胖', '偏胖'
elif 28 <= bmi < 30:
    who, dom = '偏胖', '正常'
else:
    who, dom = '肥胖', '肥胖'
print("BMI指标为:国际{},国内{}".format(who, dom))
```

<br>

## 4.4 程序的循环结构
### 4.4.1 遍历循环:for语句
#### 1. 基本语法:  
```python
for <循环变量> in <遍历结构>:  
    <语句块> 
```

#### 2. 遍历结构:
遍历结构可以是字符串\文件\组合数据类型或range()函数等,使用方法:
|      遍历方法      |        结构        |
| :----------------: | :----------------: |
|      循环N次       | for i in range(N): |
| 遍历文件fi的每一行 |    for i in fi:    |
|    遍历字符串s     |    for c in s:     |
|     遍历列表ls     |  for item in ls:   |
#### 3. 扩展模式:
- 代码格式:
```python
for <循环变量> in <遍历结构>:  
    <语句块1>  
else:  
    <语句块2>  
```
- 注意:
else语句只在循环正常执行后才执行并结束

- 例子
- 代码:
```python
for s in 'BIT':
    print("循环进行中: "+ s)
else:
    s = "循环正常结束"
print(s)
```
- 输出结果:
>循环进行中:B
循环进行中:I
循环进行中:T
循环正常结束

<br>

### 4.4.2 无限循环：while语句
#### 1. 基本方法(无限循环):  
- 代码格式:
```python
while <条件>:  
    <语句块>
```
#### 2. 扩展模式:
- 代码格式:
```python
while <条件>:  
    <语句块1>  
else:  
    <语句块2>
```
- 例子  
- 代码:
```python
s, idx = "BIT",0
while idx < len(s):
    print("循环进行中: " + s[idx])
    idx += 1
else:
    s = "循环正常结束"
print(s)
```
- 输出结果:
>循环进行中:B
循环进行中:I
循环进行中:T
循环正常结束

<br>

### 4.4.3 循环保留字:break和continue
#### 1. break语句
break用来跳出最内层for或while循环,脱离该循环后程序从循环代码后继续执行
- 例子
- 代码:
```python
for i in "BIT":
    for j in range(10):
        print(i, end="")
        if i == 'I':
            break
```
- 输出结果:
>BBBBBBBBBBITTTTTTTTTT
- 每个break语句只有能力跳出当前层次循环

#### 2. continue语句
continue用来结束当前当次循环,即跳出循环体中下面未执行的语句,但不跳出当前循环
- 对比continue和break语句
- 代码：
```python
#continue语句
for s in 'PYTHON':
    if s == 'T':
        continue
    print(s,end='')

>>>
PYHON

#break语句
for s in 'PYTHON':
    if s == 'T':
        break
    print(s,end='')

>>>
PY
```

<br>

## 4.5 模块2:random库的使用
### 4.5.2 random库解析
#### 1. random库的常用函数(共9个)
|             函数             |                      描述                      |                     参数                      |
| :--------------------------: | :--------------------------------------------: | :-------------------------------------------: |
|         seed(a=None)         |             改变随机数生成器的种子             | x：种子，整型或浮点型都行。默认为当前系统时间 |
|           random()           |        生成一个[0.0,1.0)之间的随机小数         |                     null                      |
|         randint(a,b)         |            生成一个[a,b]之间的整数             |                 a,b必须为整数                 |
|        getrandbits(k)        |         返回一个可以用k位二进制的整数          |           a,b,k必须是整数,k默认为1            |
| randrange(start,stop[,step]) | 生成一个[start,stop)之间以step为步数的随机整数 |     start,stop,step必须是整数,step默认为1     |
|         uniform(a,b)         |          生成一个[a,b]之间的随机小数           |            a,b可以是整型或是浮点型            |
|         choice(seq)          |       返回一个列表、元组或字符串的随机项       |              字符串、列表或元组               |
|        sample(seq,k)         |       返回k个列表、元组或字符串的随机项        |              字符串、列表或元组               |
|         shuffle(seq)         |  将序列类型中的元素随机排列<br>注意!无返回值   |                     列表                      |
- 例子
- 代码:
```python
#random库函数试验
import random
# seed
random.seed(3)
print(random.random())
random.seed()
print(random.random())

# randint
print(random.randint(1, 10))

# getrandbits
print(random.getrandbits(3))

# uniform
print(random.uniform(1, 10))

# choice
print(random.choice([1, 3, 5, 7, 9]))

# sample
print(random.sample([1, 3, 5, 7, 9], 3))

# shuffle
items = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0]
random.shuffle(items)
print(items)
```

<br>

## 4.6 实例6:$\pi$的计算
### 4.6.1 应用蒙特卡罗方法求解$\pi$值
应用蒙特卡罗方法求解$\pi$值的程序如下:
```python
# e6.1 Calpi
from random import random
from math import sqrt
from time import process_time
DARTS = 10000  # 抛点个数
hits = 0  # 在圆内的抛点个数
process_time()
for i in range(1, DARTS+1):
    x, y = random(), random()
    dist = sqrt(x ** 2 + y ** 2)  # 四分之一圆
    if dist <= 1.0:
        hits = hits + 1
pi = 4 * (hits/DARTS)
print("Pi的值是{}.".format(pi))
print("运行时间是:{:5.5}s".format(process_time()))
```

<br>

### 4.6.2 蒙特卡罗方法
蒙特卡罗方法,又称随机抽样或统计试验方法.  
(具体上网查询资料)

<br>

## 4.7 程序的异常处理
### 4.7.1 异常处理:try-except语句
```python
try:
    <语句块1>
except <异常类型>:
    <语句块2>
```
语句块1是正常执行的程序内容,当发生异常时执行except保留字后面的语句块
- 例子
- 代码:
```python
try:
    num = eval(input("请输入一个整数:"))
    print(num ** 2)
except NameError:
    print("输入错误,请输入一个整数!")
```

<br>

### 4.7.2 异常的高级用法
#### 1. try-except支持多个except语句
- 例子
- 代码:
```python
try:
    alp = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'
    idx = eval(input("请输入一个整数: "))
    print(alp[idx])
except NameError:
    print("输入错误,请输入一个整数!")
except:
    print("其他错误")
```
#### 2. try语族子句形式表:
- except: 捕获所有异常
- except name: 只捕获特定的异常
- except name,value: 捕获异常和它的附加数据（将异常的信息保存到value，）
- except (name1,name2): 捕获任何列出的异常
- else: 如果没有异常
- finally: 总是执行
